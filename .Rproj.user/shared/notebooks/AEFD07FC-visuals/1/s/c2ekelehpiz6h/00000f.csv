"0","# setup proportions of homeowners by state for different generations"
"0","states <- geojsonio::geojson_read(""https://rstudio.github.io/leaflet/json/us-states.geojson"", what = ""sp"")"
"0","map_states <- data.frame(id=as.numeric(states$id))"
"0","owners_by_state <- data %>% "
"0","  filter(RELATE == 0101) %>%"
"0","  filter(GEN != 'Pre 1946') %>%"
"0","  group_by(GEN, STATEFIP) %>%"
"0","  reframe(p = round(100*weighted.mean(OWNERSHP==10, ASECWTH), digits=2)) %>%"
"0","  drop_na() %>%"
"0","  right_join(map_states, join_by(STATEFIP==id)) %>%"
"0","  pivot_wider(names_from=GEN, values_from=p) %>%"
"0","  select(!""NA"")"
"0","states$boomer <- owners_by_state[match(map_states$id, owners_by_state$STATEFIP),]$""Baby Boomer"""
"0","states$millenial <- owners_by_state[match(map_states$id, owners_by_state$STATEFIP),]$""Millenial"""
"0","states$genx <- owners_by_state[match(map_states$id, owners_by_state$STATEFIP),]$""Gen X"""
"0","states$genz <- owners_by_state[match(map_states$id, owners_by_state$STATEFIP),]$""Gen Z"""
